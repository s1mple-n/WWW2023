<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org/">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${pageTitle}"></title>
    <link rel="stylesheet" href="/css_admin/__base.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@3.7.1/dist/chart.min.js"></script>
</head>
<body class="bg-[#f9fafb]">

<div class="relative flex flex-row justify-between items-start">
    <!--  START SIDEBAR-->
    <aside class="w-64 flex-shrink-0 sticky top-0 left-0 px-2 h-screen z-10 bg-white border-r border-slate-200">
        <div xmlns:th="http://www.thymeleaf.org/" class="h-16 w-full flex flex-row justify-start items-center">
            <figure class="w-16 h-16 overflow-hidden">
                <img th:src="@{/imgs/logo.png}"  class="w-full h-full object-cover rounded-full">
            </figure>
            <span class="font-bold text-lg">
                    TUIS G16
                </span>
        </div>
        <div class="w-full flex flex-col justify-start items-center">
            <a href="/admin/all" class="option bg-slate-200">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                    <path d="M22 8a.76.76 0 0 0 0-.21v-.08a.77.77 0 0 0-.07-.16.35.35 0 0 0-.05-.08l-.1-.13-.08-.06-.12-.09-9-5a1 1 0 0 0-1 0l-9 5-.09.07-.11.08a.41.41 0 0 0-.07.11.39.39 0 0 0-.08.1.59.59 0 0 0-.06.14.3.3 0 0 0 0 .1A.76.76 0 0 0 2 8v8a1 1 0 0 0 .52.87l9 5a.75.75 0 0 0 .13.06h.1a1.06 1.06 0 0 0 .5 0h.1l.14-.06 9-5A1 1 0 0 0 22 16V8zm-10 3.87L5.06 8l2.76-1.52 6.83 3.9zm0-7.72L18.94 8 16.7 9.25 9.87 5.34zM4 9.7l7 3.92v5.68l-7-3.89zm9 9.6v-5.68l3-1.68V15l2-1v-3.18l2-1.11v5.7z"></path>
                </svg>
                <span class="text-black">QL Đơn hàng</span>
            </a>
            <a href="/admin/customers/all" class="option ">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24"><path d="M12 2a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 8a3 3 0 1 1 3-3 3 3 0 0 1-3 3zm9 11v-1a7 7 0 0 0-7-7h-4a7 7 0 0 0-7 7v1h2v-1a5 5 0 0 1 5-5h4a5 5 0 0 1 5 5v1z"></path>
                </svg>
                <span>QL Khách hàng</span>
            </a>
            <a href="/admin/products/all" class="option ">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24">
                    <path d="M5 22h14c1.103 0 2-.897 2-2V9a1 1 0 0 0-1-1h-3V7c0-2.757-2.243-5-5-5S7 4.243 7 7v1H4a1 1 0 0 0-1 1v11c0 1.103.897 2 2 2zM9 7c0-1.654 1.346-3 3-3s3 1.346 3 3v1H9V7zm-4 3h2v2h2v-2h6v2h2v-2h2l.002 10H5V10z"></path>
                </svg>
                <span>QL Sản phẩm</span>
            </a>
        </div>
    </aside>
    <!--  END SIDEBAR-->

    <div class="w-9/12 relative flex-1 flex flex-col justify-start items-center">
        <!--  START HEADER-->
        <header class="w-full h-16 shadow-md z-30 bg-white flex-shrink-0 sticky top-0 right-0" th:insert="view_admin/header.html"></header>
        <!--  END HEADER-->

        <main class="w-full px-5 py-3 mt-2 h-screen z-20 flex-1 flex flex-col justify-start items-start">

            <!--      START MAIN CONTENT-->
            <div class="w-full">
                <p class="font-medium text-2xl">
                    Quản lí đơn hàng
                </p>
            </div>
            <div class="w-full mt-6 bg-transparent flex flex-row justify-start items-start">
                <div class="w-48 h-20 mr-4 border border-slate-300 shadow-sm rounded-md px-3 py-3 bg-white flex flex-row justify-between items-center">
                    <div class="w-1/4 h-full flex-shrink-0 flex flex-col justify-center items-center">
                        <figure class="w-11 h-11 rounded-full bg-cyan-600 flex flex-row justify-center items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="fill-gray-100">
                                <path d="M22 8a.76.76 0 0 0 0-.21v-.08a.77.77 0 0 0-.07-.16.35.35 0 0 0-.05-.08l-.1-.13-.08-.06-.12-.09-9-5a1 1 0 0 0-1 0l-9 5-.09.07-.11.08a.41.41 0 0 0-.07.11.39.39 0 0 0-.08.1.59.59 0 0 0-.06.14.3.3 0 0 0 0 .1A.76.76 0 0 0 2 8v8a1 1 0 0 0 .52.87l9 5a.75.75 0 0 0 .13.06h.1a1.06 1.06 0 0 0 .5 0h.1l.14-.06 9-5A1 1 0 0 0 22 16V8zm-10 3.87L5.06 8l2.76-1.52 6.83 3.9zm0-7.72L18.94 8 16.7 9.25 9.87 5.34zM4 9.7l7 3.92v5.68l-7-3.89zm9 9.6v-5.68l3-1.68V15l2-1v-3.18l2-1.11v5.7z"></path>
                            </svg>
                        </figure>
                    </div>
                    <div class="ml-4 h-full flex-1 flex flex-col justify-between items-start">
                        <p class="text-slate-900">
                            Tổng số
                        </p>
                        <p class="text-xl font-medium" th:text="${orderStatusTotal}"></p>
                    </div>
                </div>
                <div class="w-48 h-20 mr-4 border border-slate-300 shadow-sm rounded-md px-3 py-3 bg-white flex flex-row justify-between items-center">
                    <div class="w-1/4 h-full flex-shrink-0 flex flex-col justify-center items-center">
                        <figure class="w-11 h-11 rounded-full bg-yellow-400 flex flex-row justify-center items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="fill-gray-100">
                                <path d="M19.875 3H4.125C2.953 3 2 3.897 2 5v14c0 1.103.953 2 2.125 2h15.75C21.047 21 22 20.103 22 19V5c0-1.103-.953-2-2.125-2zm0 16H4.125c-.057 0-.096-.016-.113-.016-.007 0-.011.002-.012.008L3.988 5.046c.007-.01.052-.046.137-.046h15.75c.079.001.122.028.125.008l.012 13.946c-.007.01-.052.046-.137.046z"></path><path d="M6 7h6v6H6zm7 8H6v2h12v-2h-4zm1-4h4v2h-4zm0-4h4v2h-4z"></path>
                            </svg>
                        </figure>
                    </div>
                    <div class="ml-4 h-full flex-1 flex flex-col justify-between items-start">
                        <p class="text-slate-900">
                            Mới
                        </p>
                        <p class="text-xl font-medium" th:text="${orderStatusProcess}">
                        </p>
                    </div>
                </div>
                <div class="w-48 h-20 mr-4 border border-slate-300 shadow-sm rounded-md px-3 py-3 bg-white flex flex-row justify-between items-center">
                    <div class="w-1/4 h-full flex-shrink-0 flex flex-col justify-center items-center">
                        <figure class="w-11 h-11 rounded-full bg-blue-500 flex flex-row justify-center items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="fill-gray-100">
                                <path d="M20.563 3.34a1.002 1.002 0 0 0-.989-.079l-17 8a1 1 0 0 0 .026 1.821L8 15.445v6.722l5.836-4.168 4.764 2.084a1 1 0 0 0 1.399-.85l1-15a1.005 1.005 0 0 0-.436-.893zm-2.466 14.34-5.269-2.306L16 9.167l-7.649 4.25-2.932-1.283 13.471-6.34-.793 11.886z"></path>
                            </svg>
                        </figure>
                    </div>
                    <div class="ml-4 h-full flex-1 flex flex-col justify-between items-start">
                        <p class="text-slate-900">
                            Đang giao
                        </p>
                        <p class="text-xl font-medium" th:text="${orderStatusDelivery}">
                        </p>
                    </div>
                </div>
                <div class="w-48 h-20 mr-4 border border-slate-300 shadow-sm rounded-md px-3 py-3 bg-white flex flex-row justify-between items-center">
                    <div class="w-1/4 h-full flex-shrink-0 flex flex-col justify-center items-center">
                        <figure class="w-11 h-11 rounded-full bg-green-500 flex flex-row justify-center items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="fill-gray-100">
                                <circle cx="12" cy="12" r="3"></circle><path d="M13 4.069V2h-2v2.069A8.008 8.008 0 0 0 4.069 11H2v2h2.069A8.007 8.007 0 0 0 11 19.931V22h2v-2.069A8.007 8.007 0 0 0 19.931 13H22v-2h-2.069A8.008 8.008 0 0 0 13 4.069zM12 18c-3.309 0-6-2.691-6-6s2.691-6 6-6 6 2.691 6 6-2.691 6-6 6z"></path>
                            </svg>
                        </figure>
                    </div>
                    <div class="ml-4 h-full flex-1 flex flex-col justify-between items-start">
                        <p class="text-slate-900">
                            Đã giao
                        </p>
                        <p class="text-xl font-medium" th:text="${orderStatusShipped}">
                        </p>
                    </div>
                </div>
                <div class="w-48 h-20 mr-4 border border-slate-300 shadow-sm rounded-md px-3 py-3 bg-white flex flex-row justify-between items-center">
                    <div class="w-1/4 h-full flex-shrink-0 flex flex-col justify-center items-center">
                        <figure class="w-11 h-11 rounded-full bg-red-500 flex flex-row justify-center items-center">
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="fill-gray-100">
                                <path d="m16.192 6.344-4.243 4.242-4.242-4.242-1.414 1.414L10.535 12l-4.242 4.242 1.414 1.414 4.242-4.242 4.243 4.242 1.414-1.414L13.364 12l4.242-4.242z"></path>
                            </svg>
                        </figure>
                    </div>
                    <div class="ml-4 h-full flex-1 flex flex-col justify-between items-start">
                        <p class="text-slate-900">
                            Đã huỷ
                        </p>
                        <p class="text-xl font-medium" th:text="${orderStatusCancel}">
                        </p>
                    </div>
                </div>
            </div>
            <div class="w-full mt-6 flex flex-row justify-between items-center">
                <div class="flex flex-row justify-start items-center">
                    <div class="relative mr-3">
                        <div class="admin-order-viewOptions-title cursor-pointer rounded-md flex flex-row justify-between items-center px-5 py-3 border-2 border-slate-600 transition-all duration-200 hover:border-blue-600">
                            <span class="font-medium mr-3 pointer-events-none" th:text="${orderViewOptionTitle}"></span>
                            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" style="fill: rgba(0, 0, 0, 1);" class="admin-order-viewOptions-icon pointer-events-none transform transition-all duration-200">
                                <path d="M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"></path>
                            </svg>
                        </div>
                        <div class="admin-order-viewOptions z-50 absolute top-8 left-0 transition-all duration-200 flex flex-col justify-start items-start px-2 py-2 w-56 border border-slate-400 shadow-lg rounded-md bg-white opacity-0 invisible">
                            <a href="/admin/all" class="admin-order-view-option">
                                Tất cả đơn hàng
                            </a>
                            <a href="/admin/processingOrders" class="admin-order-view-option">
                                Đơn hàng mới
                            </a>
                            <a href="/admin/shippingOrders" class="admin-order-view-option">
                                Đơn hàng đang giao
                            </a>
                            <a href="/admin/shippedOrders" class="admin-order-view-option">
                                Đơn hàng đã giao
                            </a>
                            <a href="/admin/cancelledOrders" class="admin-order-view-option">
                                Đơn hàng đã huỷ
                            </a>
                        </div>
                    </div>
                    <a href="" class="px-3 py-3 flex flex-row justify-start items-center rounded-md bg-blue-600 transition-all hover:bg-blue-700">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" class="fill-white">
                            <circle cx="12" cy="20" r="2"></circle><circle cx="12" cy="4" r="2"></circle><circle cx="6.343" cy="17.657" r="2"></circle><circle cx="17.657" cy="6.343" r="2"></circle><circle cx="4" cy="12" r="2.001"></circle><circle cx="20" cy="12" r="2"></circle><circle cx="6.343" cy="6.344" r="2"></circle><circle cx="17.657" cy="17.658" r="2"></circle>
                        </svg>
                        <span class="ml-3 text-gray-100">
                                Làm mới
                            </span>
                    </a>
                </div>
                <div class="relative">
                    <div>
                        <input type="search" placeholder="Tìm đơn hàng theo mã đơn, mã KH, số điện thoại"
                               class="order-search-input w-96 rounded-md text-sm outline-none pl-10 pr-2 py-3 border border-slate-400 transition-all focus:border-blue-600">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" style="fill: rgba(0, 0, 0, 1);"
                             class="absolute top-1/2 left-2 transform -translate-y-1/2">
                            <path d="M10 18a7.952 7.952 0 0 0 4.897-1.688l4.396 4.396 1.414-1.414-4.396-4.396A7.952 7.952 0 0 0 18 10c0-4.411-3.589-8-8-8s-8 3.589-8 8 3.589 8 8 8zm0-14c3.309 0 6 2.691 6 6s-2.691 6-6 6-6-2.691-6-6 2.691-6 6-6z"></path>
                        </svg>
                    </div>
                    <div class="search-order-suggesstion-container  absolute right-0 opacity-0 invisible z-50 bg-white top-full mt-1 w-[530px] border border-slate-300 shadow-md rounded-md px-1 py-1">-->

                    </div>
                </div>
            </div>
            <div class="w-full max-h-96 overflow-auto mt-6">
                <table class="w-full rounded-md relative bg-white">
                    <tr class="sticky top-0 left-0 bg-slate-200 border-b border-slate-300 text-center font-medium">
                        <td class="w-1/12 rounded-tl-md">Hành động</td>
                        <td class="w-1/12">Mã đơn</td>
                        <td class="w-1/12">Mã KH</td>
                        <td class="w-2/12">Tên khách hàng</td>
                        <td class="w-2/12">Số điện thoại</td>
                        <td class="w-2/12 py-3">Thời gian đặt</td>
                        <td class="w-2/12">Tổng tiền</td>
                        <td class="w-1/12 rounded-tr-md">Trạng thái</td>
                    </tr>
                    <th:block th:each="order: ${orderList}">
                    <tr class="border-b border-slate-300 text-center">
                        <td class="h-full pt-1 flex flex-row justify-start items-center">
                            <a th:href="@{/admin/orders/order/{orderId}(orderId=${order.saleOrderId})}" class="mr-2 px-2 py-2 rounded-md bg-indigo-500 text-white transition-all hover:bg-indigo-600">
                                Xem
                            </a>
                            <a href="" th:if="${order.status} == 1" class="mr-2 px-2 py-2 rounded-md bg-red-500 text-white transition-all hover:bg-red-600"
                            onclick="if(!(confirm('Bạn có chắc sẽ hủy đơn hàng không?'))) return false;"
                            th:href="@{/admin/cancelOrders/{saleOrderId}(saleOrderId=${order.saleOrderId})}">
                                Huỷ
                            </a>
                            <a href="" th:if="${order.status} == 1" class="mr-2 ml-2 px-2 py-2 rounded-md bg-blue-500 text-white transition-all hover:bg-blue-600"
                               onclick="if(!(confirm('Bạn có chắc đã chuẩn bị xong đơn hàng này không?'))) return false;"
                               th:href="@{/admin/confirmProcessedOrders/{saleOrderId}(saleOrderId=${order.saleOrderId})}">
                                Giao
                            </a>
                            <a href="" th:if="${order.status} == 2" class="mr-2 px-2 py-2 rounded-md bg-purple-600 text-white transition-all hover:bg-green-600"
                               onclick="if(!(confirm('Bạn có chắc chắn muốn chuyển trạng thái đơn hàng từ đang giao sang đã giao không?'))) return false;"
                               th:href="@{/admin/confirmShippedOrders/{saleOrderId}(saleOrderId=${order.saleOrderId})}">
                                Xong
                            </a>
                        </td>
                        <td th:text="${order.saleOrderId}"></td>
                        <td th:text="${order.customer.customerId}"></td>
                        <td class="py-3" th:text="${order.customer.firstName} + ' ' + ${order.customer.lastName}"></td>
                        <td th:text="${order.phone}"></td>
                        <td th:text="${#temporals.format(order.orderDate, 'dd-MM-yyyy HH:mm')}"></td>
                        <td>
                            <span th:text="${@priceConvert.chuyenMoney(order.totalDue)}" class="font-medium text-red-500"></span>
                            <span class="ml-1 font-medium text-red-500">&#8363</span>
                        </td>
                        <td th:if="${order.status} == 4">
                            <span class="inline-block w-24 py-2 text-sm font-medium text-white rounded-md bg-green-600">
                                Đã giao
                            </span>
                        </td>
                        <td th:if="${order.status} == 3">
                            <span class="inline-block w-24 py-2 text-sm font-medium text-white rounded-md bg-red-600">
                                Đã huỷ
                            </span>
                        </td>
                        <td th:if="${order.status} == 2">
                            <span class="inline-block w-24 py-2  text-sm font-medium text-white rounded-md bg-blue-600">
                                Đang giao
                            </span>
                        </td>
                        <td th:if="${order.status} == 1">
                            <span class="inline-block w-24 py-2 text-sm font-medium text-white rounded-md bg-yellow-600">
                                Đang xử lí
                            </span>
                        </td>
                    </tr>
					</th:block>
                </table>
            </div>
            <div class="mt-6">
                <p class="text-3xl font-medium">Đồ thị</p>
            </div>
            <div class="w-full h-96 mt-6 px-5 py-5 bg-white border border-r-slate-400 shadow-md rounded-md flex flex-row justify-center items-center">
                <div class="relative">
                    <p class="text-lg mb-1 font-medium">Chế độ phân tích</p>
                    <div class="order-staticOptions-title cursor-pointer w-80 px-5 py-3 text-center rounded-md flex flex-row justify-center items-center border-2 border-slate-500 transition-all duration-200 hover:border-blue-600">
                        <span class="order-static-option-name font-medium mr-3 pointer-events-none">Ngày hôm nay</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" style="fill: rgba(0, 0, 0, 1);" class="order-static-icon pointer-events-none transform transition-all duration-200">
                            <path d="M16.293 9.293 12 13.586 7.707 9.293l-1.414 1.414L12 16.414l5.707-5.707z"></path>
                        </svg>
                    </div>
                    <div class="order-staticOptions absolute w-80 top-8 left-0 flex flex-col bg-white justify-start items-start rounded-md border border-slate-300 shadow-md transition-all duration-200 opacity-0 invisible px-2 py-2">
                        <button value="1" class="order-static-option order-static-today py-2 block w-full rounded-md font-medium transition-all hover:bg-slate-200">
                            Ngày hôm nay
                        </button>
                        <button value="2" class="order-static-option order-static-thisWeek py-2 block w-full rounded-md font-medium transition-all hover:bg-slate-200">
                            Tuần này
                        </button>
                        <button value="3" class="order-static-option order-static-thisMonth py-2 block w-full rounded-md font-medium transition-all hover:bg-slate-200">
                            Tháng này
                        </button>
                    </div>
                </div>
                <div class="w-96 h-full px-5 py-5 flex flex-col justify-center items-center">
                    <p class="mt-2 font-medium text-xl text-center">Cơ cấu của các loại đơn hàng</p>
                    <div class="canvas-container ">

                    </div>
                </div>
            </div>
            <!--      END MAIN CONTENT-->
        </main>
    </div>
</div>

<!-- SCRIPT FOR MAKING ANIMATION OF HEADER AND FOOTER-->
<script src="/script_admin/header.js"></script>
<script src="/script_admin/orders_manager.js" defer></script>
<script src="/script_admin/orders-chart.js"></script>
</body>
</html>